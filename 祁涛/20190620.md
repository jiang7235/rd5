学习：

掌握基本命令：sed ,grep ,awk的用法

掌握正则表达式符号和语法

正则表达式，又称正规表示式、正规表示法、正规表达式、规则表达式、常规表示法（英语：Regular Expression，在代码中常简写为 regex、regexp 或 RE），计算机科学的一个概念。正则表达式使用单个字符串来描述、匹配一系列符合某个句法规则的字符串。在很多文本编辑器里，正则表达式通常被用来检索、替换那些符合某个模式的文本

一个正则表达式通常被称为一个模式（pattern），为用来描述或者匹配一系列符合某个句法规则的字符串

选择

|竖直分隔符表示选择，例如"boy|girl"可以匹配"boy"或者"girl"

数量限定

数量限定除了我们举例用的*,还有+加号,?问号,如果在一个模式中不加数量限定符则表示出现一次且仅出现一次：

+表示前面的字符必须出现至少一次(1次或多次)，例如，"goo+gle",可以匹配"gooogle","goooogle"等；

?表示前面的字符最多出现一次(0次或1次)，例如，"colou?r",可以匹配"color"或者"colour";

*星号代表前面的字符可以不出现，也可以出现一次或者多次（0次、或1次、或多次），例如，“0*42”可以匹配42、042、0042、00042等。

范围和优先级

()圆括号可以用来定义模式字符串的范围和优先级，这可以简单的理解为是否将括号内的模式串作为一个整体。例如，"gr(a|e)y"等价于"gray|grey"，（这里体现了优先级，竖直分隔符用于选择a或者e而不是gra和ey），"(grand)?father"匹配father和grandfather（这里体验了范围，?将圆括号内容作为一个整体匹配）。

语法（部分）

正则表达式有多种不同的风格，下面列举一些常用的作为 PCRE 子集的适用于perl和python编程语言及grep或egrep的正则表达式匹配规则

3.1 基本操作

grep命令用于打印输出文本中匹配的模式串，它使用正则表达式作为模式匹配的条件。grep支持三种正则表达式引擎，分别用三个参数指定

参数	说明

-E	POSIX扩展正则表达式，ERE

-G	POSIX基本正则表达式，BRE

-P	Perl正则表达式，PCRE

在通过grep命令使用正则表达式之前，先介绍一下它的常用参数：

参数	说明

-b	将二进制文件作为文本来进行匹配

-c	统计以模式匹配的数目

-i	忽略大小写

-n	显示匹配文本所在行的行号

-v	反选，输出不匹配行的内容

-r	递归匹配查找

-A n	n为正整数，表示after的意思，除了列出匹配行之外，还列出后面的n行

-B n	n为正整数，表示before的意思，除了列出匹配行之外，还列出前面的n行

--color=auto	将输出中的匹配项设置为自动颜色显

3.2 使用正则表达式

使用基本正则表达式，BRE

位置

查找/etc/group文件中以"shiyanlou"为开头的行

![图片描述](https://dn-simplecloud.shiyanlou.com/courses/uid1080365-19800115-316798325973)

数量

![图片描述](https://dn-simplecloud.shiyanlou.com/courses/uid1080365-19800115-316798437286)

选择

![图片描述](https://dn-simplecloud.shiyanlou.com/courses/uid1080365-19800115-316798562885)

使用扩展正则表达式，ERE

要通过grep使用扩展正则表达式需要加上-E参数，或使用egrep。

数量

![图片描述](https://dn-simplecloud.shiyanlou.com/courses/uid1080365-19800115-316798697975)

sed 流编辑器：用于过滤和转换文本的流编辑器

4.1 sed常用参数介绍

sed [参数]... [执行命令] [输入文件]...
# 形如：

$ sed -i 's/sad/happy/' test # 表示将test文件中的"sad"替换为"happy"


参数	说明

-n	安静模式，只打印受影响的行，默认打印输入数据的全部内容

-e	用于在脚本中添加多个执行命令一次执行，在命令行中执行多个命令通常不需要加该参数

-f filename	指定执行filename文件中的命令

-r	使用扩展正则表达式，默认为标准正则表达式

-i	将直接修改输入文件内容，而不是打印到标准输出设备

4.2 sed编辑器的执行命令

[n1][,n2]command

[n1][~step]command

# 其中一些命令可以在后面加上作用范围，形如：

$ sed -i 's/sad/happy/g' test # g表示全局范围

$ sed -i 's/sad/happy/4' test # 4表示指定行中的第四个匹配字符串

4.3 sed操作举例

打印指定行

![图片描述](https://dn-simplecloud.shiyanlou.com/courses/uid1080365-19800115-316799137449)

行内替换，行间替换

![图片描述](https://dn-simplecloud.shiyanlou.com/courses/uid1080365-19800115-316799348377)

awk文本处理语言

5.1awk基本概念


awk所有的操作都是基于pattern(模式)—action(动作)对来完成的，如下面的形式：

$ pattern {action}

可以看到就如同很多编程语言一样，它将所有的动作操作用一对{}花括号包围起来。其中pattern通常是表示用于匹配输入的文本的“关系式”或“正则表达式”，action则是表示匹配后将执行的动作。在一个完整awk操作中，这两者可以只有其中一个，如果没有pattern则默认匹配输入的全部文本，如果没有action则默认为打印匹配内容到屏幕

5.2awk命令基本格式

awk [-F fs] [-v var=value] [-f prog-file | 'program text'] [file...]

其中-F参数用于预先指定前面提到的字段分隔符（还有其他指定字段的方式） ，-v用于预先为awk程序指定变量，-f参数用于指定awk命令要执行的程序文件，或者在不加-f参数的情况下直接将程序语句放在这里，最后为awk需要处理的文本输入，且可以同时输入多个文本文件
