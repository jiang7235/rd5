一、添加 SSH 关联授权

上一节操作中每次提交都要手动输入用户名和密码，若想避免这些麻烦，可以在系统中创建 SSH 公私钥，并将公钥放到 GitHub 指定位置。如此操作即可生成 GitHub 账户对于当前系统中的 Git 授权。

终端执行 ssh-keygen 命令按几次回车生成公私钥，公私钥存放在家目录下的隐藏目录 .ssh 中的两个文件中

![图片描述](https://dn-simplecloud.shiyanlou.com/courses/uid1080365-20190628-1561721755337)

将 ~/.ssh/id_rsa.pub 文件中的公钥内容复制出来，实验环境中可以使用右侧工具栏中的剪切板复制

![图片描述](https://dn-simplecloud.shiyanlou.com/courses/uid1080365-20190628-1561722008763)

然后在 GitHub 网页上添加公钥

Title 自定义，把剪切板中的内容粘贴到 Key 中，点击绿色按钮添加 SSH Key 即可

回到仓库主目录，点击下图所示的绿色按钮，点击紫色框中的 “Use SSH”，然后复制这个链接

在实验环境里删除原仓库，使用此链接重新克隆仓库。克隆仓库是需要确认连接，输入 yes 即可

重要的一点：只有使用这种 git 开头的地址克隆仓库，SSH 关联才会起作用。

使用 SSH 的好处主要有两点：

免密码推送，执行 git push 时不再需要输入用户名和密码了；

提高数据传输速度。它不是必须的，比如在实验楼的课程中挑战环境是不可保存的，一次性的，这种环境就没有必要创建 SSH 了，因为相较好处来说，还是太麻烦了。

二、为 Git 命令设置别名

设置别名的命令是 git config --global alias.[别名] [原命令]，如果原命令中有选项，需要加引号。别名是自定义的，可以随意命名，设置后，原命令和别名具有同等作用

己设置的别名要记住，也可以使用 git config -l 命令查看配置文件。下面文档中的命令将使用这些别名。

三、Git 分支管理

3.1 git fetch 刷新本地分支信息

先讲解另一个命令 git fetch，它的作用是将远程仓库的分支信息拉取到本地仓库，注意，仅仅是更新了本地的远程分支信息，也就是执行 git branch -avv 命令时，查看到的 remotes 开头的行的分支信息。

在实验环境中执行 git fetch 命令，然后执行 git branch -avv 查看分支信息

本地分支 master 的版本号无变化，而远程分支已经更新。所以，fetch 命令的作用是刷新保存在本地仓库的远程分支信息，此命令需要联网。此时若想使本地 master 分支的提交版本为最新，可以执行 git pull 命令来拉取远程分支到本地，pull 是拉取远程仓库的数据到本地，需要联网，而由于前面执行过 git fetch 命令，所以也可以执行 git rebase origin/master 命令来实现 “使本地 master 分支基于远程仓库的 master 分支”，rebase 命令在后面还会经常用到，这里只需按部就班操作即可

3.2 创建新的本地分支

首先，克隆远程仓库到本地，进入仓库主目录，执行 git br 查看分支信息

执行 git branch [分支名] 可以创建新的分支

此命令创建新分支后并未切换到新分支，还是在 master 分支上，执行 git checkout [分支名] 切换分支，checkout 也是常用命令，先给它设置别名，然后切换分支

创建新分支还要手动切换太麻烦，介绍另一个常用的命令 git checkout -b [分支名] 创建分支并切换到新分支

3.3 将新分支中的提交推送至远程仓库

执行 git push [主机名] [本地分支名]:[远程分支名] 即可将本地分支推送到远程仓库的分支中，通常冒号前后的分支名是相同的，如果是相同的，可以省略 :[远程分支名]，如果远程分支不存在，会自动创建

执行 git br 查看一下分支情况

可以看到，远程分支 origin/dev1 的信息已经在本地存在，且与本地同名分支一致。再看下 GitHub 页面的情况

3.4 本地分支跟踪远程分支

再次在 dev1 分支上修改并提交，推送到远程仓库时还是要输入长长的命令。如果能和 master 分支一样跟踪远程同名分支，就可以直接使用 git push 命令推送了。有办法的，执行这个命令 git branch -u [主机名/远程分支名] [本地分支名] 将本地分支与远程分支关联，或者说使本地分支跟踪远程分支。如果是设置当前所在分支跟踪远程分支，最后一个参数本地分支名可以省略不写


这个命令的 -u 选项是 --set-upstream 的缩写。可不可以让本地分支跟踪远程非同名分支呢？可以的，尽管几乎遇不到这种自找麻烦的需求。可不可以撤销本地分支对远程分支的跟踪呢？也是可以的，执行 git branch --unset-upstream [分支名] 即可撤销该分支对远程分支的跟踪，同样地，如果撤销当前所在的分支的跟踪，分支名可以省略不写

3.5 删除远程分支

首先，删除远程分支，使用 git push [主机名] :[远程分支名] ，如果一次性删除多个，可以这样：git push [主机名] :[远程分支名] :[远程分支名] :[远程分支名] 。此命令的原理是将空分支推送到远程分支，结果自然就是远程分支被删除。另一个删除远程分支的命令：git push [主机名] --delete [远程分支名]。删除远程分支的命令可以在任意本地分支中执行。两个命令分别试一下

可以看到本地仓库已经没有远程分支 dev 和 dev1 的分支信息。查看 GitHub 仓库页面

3.6 本地分支的更名与删除


使用 git branch -D [分支名] 删除本地分支，同样地，此命令也可以一次删除多个，将需要删除的分支名罗列在命令后面即可。在此之前，先介绍一个极少用到的命令：给本地分支改名 git branch -m [原分支名] [新分支名] ，若修改当前所在分支的名字，原分支名可以省略不写

好，现在要一次性删除本地分支 ved 和 dev1。需要注意的一点：当前所在的分支不能被删除。切换到 master 分支，然后执行 git branch -D ved dev1 命令：
