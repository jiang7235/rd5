# 1 学习内容

## 1.1 计划任务服务

&emsp;&emsp;Linux提供了一种方法在无需人工干预的情况下，让各个服务，命令在指定的时间段运行，停止。这就是系统的计划任务服务，计划任务分为“一次性”的和“长期性”。

1. 一次性计划任务：

   一次性计划任务是由atd服务/进程来实现的，计划的管理操作是“at”命令，具体参数如下所示：

   | 参数       | 作用               |
   | ---------- | ------------------ |
   | at <时间>  | 安排一次性任务     |
   | atq或at -l | 查看任务列表       |
   | at -c 序号 | 预览任务与设置环境 |
   | atrm序号   | 删除任务           |

   使用at创建计划任务有交互式和非交互式两种

   * 交互式使用at <时间>进入交换式，输入要执行的命令，ctrl+d保存。
   * 非交互式使用echo "命令" | at <时间>

   例如：在23点打开httpd服务

   ```shell
   echo "systemctl start httpd"| at 23:00	
   ```

2. 长期可循环的计划任务

&emsp;&emsp;创建长期可循环的计划任务，则要用到cron服务。

* crontab -e [-u 用户名] 　创建，编辑计划任务
* crontab -l  [-u 用户名]　 查看计划任务
* crontab -r  [-u 用户名]　 删除计划任务

## 1.2 磁盘管理

### 1.2.1 物理设备的命令管理

&emsp;&emsp;硬盘设备是由大量的"扇区"组成的，其中第一个扇区保存着主引导记录与分区表信息。单个扇区容量为512bytes组成，主引导记录需要占用446bytes，分区表的为64bytes，而每记录一个分区信息需要16bytes。所以一般来说，主分区不能超过４个。但是可以使用３个分区加１个扩展分区的方法，扩展分区中能够创建无限个逻辑分区，这样就可以用逻辑分区来满足多分区的需求。

&emsp;&emsp;Linux系统中一切都是文件，硬件也不例外。系统内核的设备管理器(Udev)会自动将硬件名称规范起来。Udev会一直以守护进程的形式运行并侦听来自内核发出的uevent来管理/dev目录下的设备文件。Udev会根据内核发出的uevent来动态添加或删除/dev目录中的设备文件。

&emsp;&emsp;命名规则如下所示:

| 硬件设备      | 文件名称           |
| ------------- | ------------------ |
| IDE设备       | /dev/hd[a-d]       |
| SCSI/SATA/U盘 | /dev/sd[a-p]       |
| 软驱          | /dev/fd[0-1]       |
| 打印机        | /dev/lp[0-15]      |
| 光驱          | /dev/cdrom         |
| 鼠标          | /dev/mouse         |
| 磁带机        | /dev/st0或/dev/ht0 |

&emsp;&emsp;一般硬盘设备都是以/dev/sd开头，一台主机上可以有多个硬盘，系统就会用a-p来代表16块不同的硬盘，例如我的电脑，查看硬盘，就会出现如下显示：

```shell
cd /dev
ls | grep sd*
匹配到二进制文件　sda1
匹配到二进制文件　sda2
匹配到二进制文件　sda3
匹配到二进制文件　sdb
匹配到二进制文件　sdb2
匹配到二进制文件　sdb3
匹配到二进制文件　sdb4
匹配到二进制文件　sdb5
匹配到二进制文件　sdb6
```

&emsp;&emsp;其中，sd指的是硬件的种类，表示SCSI/SATA/U盘设备，在这里表示我电脑上的硬盘。sd后面的a，b表示硬盘的编号，我的电脑上有一块固态，一块机械硬盘，sda指的是固态，sdb指的是机械硬盘。硬盘编号后面的数字指的是分区的编号。

### 1.2.2 文件系统与数据资料

&emsp;&emsp;文件管理系统的作用是将硬盘合理的规划，是用户能够在上面正常建立文件，写入，读取，修改，转存文件与控制文件。在Linux上比较常见的文件管理系统有如下几种：

* Ext3是一款日志文件系统能够在异常停机中避免文件系统资料不一致的情况，自动修复数据的不一致与错误，然而一般重整文件系统相当耗费时间，尤其是容量大的硬盘，当然也不能保证100%资料不流失，它会将整个磁盘的雪茹动作与先记录下来，精细到每个细节，所以在异常停机后可以回溯追踪到被中断的部分。
* Ext4可以成为Ext3的后续版本，作为RHEL6系统默认的文件管理系统，其支持更大的文件系统到1EB，另外Ext4文件系统能够批量分配block块并作"Extents"极大地提高了读写效率。
* XFS作为RHEL7默认的文件管理系统，它的日志型文件管理系统的又是在意外关机后尤其明显，可以快速的恢复可能被破坏的文件，另外经过优化后日志功能对硬盘心更影响非常小，同时最大支持18EB的存储容量，几乎满足所有需求。

### 1.2.3 挂载硬件设备

&emsp;&emsp;挂载操作指的是当用户需要使用硬盘设备的或分区数据时，需要先将其与一个已存在的目录文件做关联，这个动作就叫做挂载。mount命令用于挂载文件系统，格式为mount 文件系统　挂载目录

| 参数 | 作用                                 |
| ---- | ------------------------------------ |
| -a   | 挂载所有在/etc/fstab中定义的文件系统 |
| -t   | 指定文件系统的类型                   |

&emsp;&emsp;一般来说，mount命令主需要填写设备与挂载目录参数即可，系统会自动去判断挂载文件的类型。使用mount命令执行挂载操作后立即就可以使用该文件系统了，但重启后则失效，如果想让重启后仍然生效，我们就必须将挂载信息按照制定的格式写入到/etc/fstab文件中。

&emsp;&emsp;“/etc/fstab”包含着文件系统与挂载信息等内容，因为过于重要，所以只有root用户才可以编辑它。填写格式如下：

设备文件　挂载目录　格式类型　权限选项　自检　优先级

* 设备文件：一般为设备的路径＋名称，也可以写UUID值等。

* 挂载目录：指定要挂载的目录，需在挂载前创建好

* 格式类型：执行文件系统的格式，如ext3,ext4等。

* 自检：若为１则开机后进行磁盘自检，０为不自检

* 优先级：若“自检”为１，则可对多块硬盘进行优先级设置。

  例如：挂载/dev/sdb2开机自动挂载到/backup目录，文件格式为ext4，默认权限且开机无须自检

  ```shell
  /dev/sdb2 /backup ext4 default 0 0 
  ```

  umount用于撤销已经挂载的文件系统，格式为 umount [ 挂载点/设备文件 ]

  例如：取消/dev/sdb2设备文件的挂载：

  ```shell
  umount /dev/sdb2
  ```

  # 2 学习总结

  &emsp;&emsp;今天主要学习了基本的磁盘操作内容，对Linux磁盘操作用了最基本的认识，之前在使用虚拟机的时候，因为需要编译内核，就比较消耗磁盘空间，如果穿件虚拟机的时候硬盘花粉小了，就经常要使用重新划分磁盘，就要经常使用命令来挂载，但是使用的命令都是百度的，通过今天的学习，再加上对之前使用命令的回想，让我对Linux磁盘管理有了更为深入的认识。明天将继续深入学习磁盘的相关操作。

  # 3 明日计划

  1. 继续学习磁盘相关操作
  2. git基础学习