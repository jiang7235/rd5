# 1　学习内容

## 1.1 文件查询命令

* grep命令

  grep命令用来对文本进行搜索。格式为：grep [参数]　文件名

  | 参数 | 作用                             |
  | ---- | -------------------------------- |
  | -b   | 将可执行的文件当做文本文件来执行 |
  | -c   | 仅显示找到的次数                 |
  | -i   | 忽略大小写                       |
  | -n   | 进显示行数                       |
  | -v   | 反向选择－仅列出没有关键词的行   |

  例如：查找历史中使用cd的次数

  ```shell
  grep -c cd ~/bash_history 
  ```

  ![1558510778191](/home/dengbin/.config/Typora/typora-user-images/1558510778191.png)

* find命令

  find命令用来查找某个文件的位置。格式为：find [查找路径]　查找条件　操作

  find命令的参数比较多，这里只列举一些比较常用的操作。

  

  _需要补充说明一下Linux文件有三种时间属性：_

  * _-mtime  修改内容的访问时间_
  * _-atime　访问文件的时间_
  * _-ctime　修改权限的时间_

  _一般这些时间是自动记录的，也可以通过touch命令对某个文件的这些时间进行修改。_

| 参数  | 作用                                      |
| ----- | ----------------------------------------- |
| -user | 匹配所有者                                |
| -name | 匹配名称                                  |
| -perm | 匹配权限，mode为完全匹配，-mode为包含即可 |
| -group| 匹配所有组|
| -mtime -n +n |匹配修改内容的时间　-n表示n天之内，+n表示n天之前，下同　|
| -atiem -n +n |匹配访问文件的时间|
| -ctime -n +n |匹配修改文件的权限的时间|
| -size |匹配文件的大小，超过使用+50K,小于使用-50K|
| -type b/d/c/p/l/f |匹配文件类型（块设备，文件，字符，管道，链接文件，文本文件|

例如：

```shell
find /var -name dmesg           //查找/var文件夹中名称为dmesg的文件
find /var --size +50K           //查找文件夹中大小超过50K的文件
```

## 1.2 管道命令符

管道命令符"|"是将前一个命令的标准输出当做后一个命令的标准输入。格式为：Com A| Com B

例如：

```shell
ll /etc | grep -c root               //统计/etc中有多少个属于toot用户的文件
```

## 1.3 输入输出重定向

在了解输入输出重定向之前，首先要了解标准输入(STDIN)，标准输出(STDOUT)和错误输出。

* 标准输入(STDIN，文件描述符为０)：默认从键盘输入，为０表示从其他文件或其他命令的输出
* 标准输出(STDOUT，文件描述符为１)：默认从输出到屏幕，为１时表示是文件
* 错误输出(STDERR,文件描述符为２)：默认输出到屏幕，为２时表示是文件

对于输出重定向符以下几种情况:

| 符号      | 作用                                       |
| --------- | ------------------------------------------ |
| 命令>文件 | 将标准输出重定向到一个文件中，覆盖原有数据 |
| 命令2>文件|　将标准输出重定向到一个文件中，覆盖原有数据 |
| 命令>>文件| 将标准输出重定向到一个文件中，追加|
| 命令2>>文件|将错误输出重定向到一个文件中，追加|

输入重定向有这些情况：

| 符号             | 作用                                         |
| ---------------- | -------------------------------------------- |
| 命令<文件        | 将文件作为命令的标准输入                     |
| 命令<<分界符     | 从标准输入中读入，直到遇到“分界符”才停止     |
| 命令<文件1>文件2 | 将文件1作为命令的标准输入并将标准输出到文件2 |

例如:

```shell
echo "test" > /home/shiyanlou/test.txt     //输入test到指定的文件中，覆盖原有数据
man bash > /root/man.txt                   //输出bash的帮助信息到指定文件中。
```

# 2 学习总结

&emsp;&emsp;今天主要学习了管道命令符和输入输出重定向，之前在用到过复杂命令的时候有接触到管道命令符和输入输出重定向以及利用while等语句来写简单的shell语句，但是一段时间之后忘了，感觉像是从头开始学习。所以昨天觉得学起来比较轻松的知识，现在学起来并不轻松，还遇到了一些问题。

# 3 未解决的问题

&emsp;&emsp;管道命令符的前一个命令的输出可以当做后一个命令的输入，那么一下的语句会出现错误：

```shell
echo "dmesg" | sudo find /etc -name             //找出/etc文件夹中名称为dmesg的文件
ll /etc | grep -c root | echo                   //统计etc下有多少root用户的文件并使用
　　　　　　　　　　　　　　　　　　　　　　　　　　　　 //echo输出
```

![1558535186718](/home/dengbin/.config/Typora/typora-user-images/1558535186718.png)

​	






