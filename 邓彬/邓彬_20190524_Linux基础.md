# 1 学习内容

## 1.1 接受用户参数

&emsp;&emsp;Shell脚本能够接受用户输入的参数，在可执行文件中已经内设了接受用户参数的位置变量。

```shell
# ./Exam.sh one two three four five six
```

&emsp;&emsp;其中，one, two...分别表示第几个位置的参数。而且Shell还可以预定义变量。

| 参数                | 作用                                           |
| ------------------- | ---------------------------------------------- |
| $0                  | 当前执行Shell脚本的程序名                      |
| $1-9,${10},${11}... | 参数的位置变量                                 |
| $#                  | 一共有多少个参数                               |
| $*                  | 所有位置变量的值                               |
| $?                  | 判断上一条命令是否执行成功，0为成功，非0为失败 |

例如：

```shell
vim Example.sh
#!/bin/bash
echo "当前脚本名称为$0"
echo "总共有$#个参数，分别是$*。"
echo "第1个参数为$1,第5个参数为$5"
```

在执行sh命令时，在命令末尾，附带五个参数，以空格隔开

## 1.2 判断用户的参数

* 测试语句

&emsp;&emsp;Shell脚本有时还要判断用户输入的参数，例如像mkdir命令一样，当目录不存在则创建，若已经存在则报错，条件测试语句能够测试特定的表达式是否成立，当条件成立时返回值为０，否则返回其他数值。格式为：**测试语句格式：[ 条件表达式 ]**

&emsp;&emsp;细分测试语句有：文件测试，逻辑测试，整数值比较，字符串值比较

&emsp;&emsp;文件测试：[ 操作符 文件或目录名 ]

| 操作符 | 作用                       |
| ------ | -------------------------- |
| -d     | 测试是否为目录             |
| -e     | 测试文件或目录是否存在     |
| -f     | 判断是否为文件             |
| -r     | 测试当前用户是否有权限读取 |
| -w     | 测试当前用户是否有权限写入 |
| -x     | 测试当前用户是否有权限执行 |

例如：写一个简单的shell脚本，判断/var/log是否是一个目录，如果是输出０，不是输出１

```shell
vim Exam.sh
#!/bin/bash
[ -d /var/log ]
echo $?
```

* 逻辑表达式

  | 操作符 | 作用   |
  | ------ | ------ |
  | &&     | 逻辑与 |
  | \|\|   | 逻辑或 |
  | !      | 逻辑否 |

* 数值比较

  | 操作符 | 作用               |
  | ------ | ------------------ |
  | -eq    | 判断是否等于       |
  | -ne    | 判断是否不等于     |
  | -gt    | 判断是否大于       |
  | -lt    | 判断是否小于       |
  | -le    | 判断是否等于或小于 |
  | -ge    | 判断是否大于或等于 |

* 字符串比较

  | 操作符 | 作用                   |
  | ------ | ---------------------- |
  | =      | 比较字符串内容是否相同 |
  | !=     | 比较字符串内容是否不同 |
  | -z     | 判断字符串内容是否为空 |

## 1.3 条件测试语句

### 1.3.1 if条件语句

&emsp;&emsp;if条件语句分为单分支结构，双分支结构，多分支结构，复杂度逐级上升。

* 单分支结构

  单分支结构由**if , then , fi**关键词组成，只在条件成立后执行。

  例如：判断目录是否存在：

  ```shell
  #!/bin/bash
  DIR = "/media/cdrom"
  if[ !-e$DIR ]
  then
  mkdir -p $DIR
  fi
  ```

  如果if条件成立，就执行then中的语句，fi作为if分支结束的标识。

* 双分支结构

  双分支是使用**if , then , else , fi**关键词组成，作条件成立或条件不成立的判断。

  例如:判断某个名称的文件是否为目录，并输出。

  ```shell
  #!/bin/bash
  if [ -d /etc/log ]
  then 
  echo "/etc/log是目录"
  else
  echo "/etc/log不是目录"
  fi	
  ```

  其实Shell的控制结构有点类似高级语言的控制语句，如果if成功，就执行then的语句，如果不是就执行else后面的语句。

* 多分支结构

  多分支语句是由**if , then ,else , elif , fi**关键词组成

  ```shell
  #!/bin/bash
  read -p "Enter your source(0-100):"GRADE
  if [ $GRADE-ge85 ]&&[ $GRADE-le100 ]:then 
  echo "$GRADE is Excellent"
  elif [ $GRADE-ge70 ]&&[ $GRADE-le84 ]:then
  echo "$GRADE is Pass"
  else
  echo "$GRADE is Fall"
  fi
  ```

# 2 学习总结

&emsp;&emsp;今天主要学写了Shell脚本的if控制语句，总体感觉与高级语言的if语句差别不是很大，主要是判断参数那块初看的时候对各种判断参数还是记得不够熟练。在判断语句的时候还要注意空格的问题，比如if(emps)[(emsp)-d /var/log(emsp)]，加(emsp)的地方代表需要添加空格，第一次编写的时候没有注意到if和[]之间的空格，使用vim编写的时候，if后面的语句中then和else都是红色的，而且运行时会报“if[: not found"的错误。

​	今天学习的难点还是在于各种判断语句的使用和记忆，相信随着以后经常使用会慢慢变得熟练。

# 3 明日计划

&emsp;&emsp;继续学习for,while循环控制语句，如果时间充足的话，会将之前学习的做一个总结，编写一些综合性的Shell脚本。























