学习心得
===
今天完整的学习了一遍 Git 和 Github 的基础知识，并进行了简单的操作练习。对 Git 和 Git 的操作命令有了更多的了解。
几年前初次接触 Github 时只知道 Github 上可以放代码，而且别人也可以看到。然后最近几次自己做项目也是用到了 Github 来托管代码，而且现在个人也可以在 Github 上创建私有仓库里，这样更方便了大家的使用。
在这次完整学习前最常用的几个 Git 命令也就是 `clone`, `pull`, `push` 等，而且基本对每个命令的参数也没有太多了解甚至并不知道有的命令的参数。
经过这次完整的学习，掌握了更多的命令和使用方法。对于版本管理和项目开发有了更深层次的理解，希望在以后的工作中不断练习和熟练，让 Git 帮助我们管理好自己的代码，同时提高效率。

每日计划
===
- Go 语言学习

---
以下为学习笔记

# Linux 基础课程（Git 篇）

<a name="nchM8"></a>
# Git 基础操作
查看 Git 版本： `git --version` <br />克隆仓库到本地： `git clone <仓库地址>` 

当我们在 GitHub 上创建一个仓库时，同时生成了仓库的默认主机名 origin，并创建了默认分支 master。

`git remote -v` 命令可以查看本地仓库所关联的远程仓库信息<br />Git 要求对本地仓库关联的每个远程主机都必须指定一个主机名（默认为 origin），用于本地仓库识别自己关联的主机， `git remote` 命令就用于管理本地仓库所关联的主机，一个本地仓库可以关联任意多个主机（即远程仓库）。

克隆远程仓库到本地时，还可以使用 -o 选项修改主机名，在地址后面加上一个字段作为本地仓库的主目录名。

Git 本地仓库有三大区域：工作区、暂存区、版本区。

`git status` 查看整个仓库的状态。

`git add [文件名]` 命令跟踪此新建文件，即把新增文件添加到暂存区，以备提交。<br />如果对多个文件或目录进行了增删改，可以使用 git add . 命令全部添加到暂存区。

如果要撤销暂存区的修改，执行 `git reset -- [文件名]` 或者 `git rm --cached [文件名]` 命令即可。<br />如果省略最后的文件名，把命令写成 `git reset --` 即可把暂存区的全部修改撤销。

`git diff`，它可以用来查看工作区被跟踪的文件的修改详情。注意，只有在版本区中存在的文件才是被跟踪文件。<br />使用 `git diff --cached` 查看暂存区的全部修改。

`git log` 它用来查看版本区的提交历史记录。

- `git log [分支名]` 查看某分支的提交历史，不写分支名查看当前所在分支
- `git log --oneline` 一行显示提交历史
- `git log -n` 其中 n 是数字，查看最近 n 个提交
- `git log --author [贡献者名字]` 查看指定贡献者的提交记录
- `git log --graph` 图示法显示提交历史
- `git log --reverse` 按照时间正序排列的信息

配置个人信息：<br />`git config --global user.email "username@example.com"` 配置 Github 邮箱<br />`git config --global user.name "username"` 配置 Github 用户名<br />`git config -l` 可以查看配置信息

`git commit` 命令把暂存区的修改提交到版本区，生成一个新的版本。一个必须的选项 `-m` 用来提供该提交的备注。

**重点！**<br />`git branch -avv`，用来查看全部分支信息。
```bash
* master              4b15a87 [ojbk/master: ahead 1] ojbk
  remotes/ojbk/HEAD   -> ojbk/master
  remotes/ojbk/master e7e9e94 Update README.md
```

- 第一行，开头的星号表示当前所在分支，绿色的 master 是分支名，之所以是绿色，也是因为它是当前所在分支。后面第二项是版本号，第三项中括号里面蓝色的字，表示此分支跟踪的远程分支的名字，当然啦，这也是克隆远程仓库到本地时的默认设置 -- 创建 master 分支并自动跟踪远程同名分支；冒号后面黑色文字表示本地分支领先其跟踪的远程分支一个提交。最后一项是提交时填写的备注信息。
- 第二行，是 Git 指针信息，它指向远程仓库的 master 分支，这行信息暂不重要。
- 第三行，远程分支信息，详见第一行的解释。

将本地新增的提交推送到 GitHub 远程仓库中，命令是 `git push`，后面不需要任何选项和参数，此命令会把本地仓库 master 分支上的新增提交推送到远程仓库的同名分支上。

**版本回退：**<br />首先执行 `git reset --soft HEAD^` 撤销最近的一次提交，将修改还原到暂存区。 `--soft` 表示软退回，对应的还有 `--hard` 硬退回，后面会讲到， `HEAD^` 表示撤销一次提交， `HEAD^^` 表示撤销两次提交，撤销 n 次可以简写为 `HEAD~n`。<br />再次修改文件，执行 `git add .` 命令将新的修改添加到暂存区，然后执行 `git commit` 命令生成新的提交。

本地仓库的 master 分支与远程仓库的 origin/master 分支在提交版本上有了冲突，又叫做提交时间线分叉。因为刚才的提交操作不是基于远程仓库 origin/master 分支的最新提交版本，而是撤回了一个版本。这种情况下也是可以将本地 master 分支推送到远程仓库的，需要加一个选项 `-f` ，它是 ` --force` 的简写，这就是强制推送。

`git reflog` 命令，会记录本地仓库所有分支的每一次版本变化。实际上只要本地仓库不被删除，随你怎么折腾，都能回退到任何地方。reflog 记录只存在于本地仓库中，本地仓库删除后，记录消失。<br />执行命令 `git reset --hard [版本号]` ，如果记不清版本号，上述命令查到的信息，执行 `git reset --hard HEAD@{2}` 命令，其中 `HEAD@{2}` 就是上述信息所示，这个命令的意思是回到当前分支最近两次提交版本变化前。

<a name="dTGvg"></a>
# Git 分支操作
**ssh 关联授权**<br />终端执行 `ssh-keygen` 命令按几次回车生成公私钥，公私钥存放在家目录下的隐藏目录 .ssh 中的两个文件中。<br />将 `~/.ssh/id_rsa.pub` 文件中的公钥内容复制出来，然后在 GitHub 网页上添加公钥。<br />克隆仓库时需要使用 ssh 链接。只有使用 git 开头的地址克隆仓库，SSH 关联才会起作用。

**拉取远程分支信息与同步**<br />`git fetch` 的作用是将远程仓库的分支信息拉取到本地仓库，注意，仅仅是更新了本地的远程分支信息，也就是执行 `git branch -avv` 命令时，查看到的 `remotes` 开头的行的分支信息。所以，fetch 命令的作用是刷新保存在本地仓库的远程分支信息，此命令需要联网。<br />此时若想使本地 master 分支的提交版本为最新，可以执行 `git pull` 命令来拉取远程分支到本地，pull 是拉取远程仓库的数据到本地，需要联网，而由于前面执行过 `git fetch` 命令，所以也可以执行 `git rebase origin/master` 命令来实现 “使本地 master 分支基于远程仓库的 master 分支”。

**新建和切换分支**<br />`git branch [分支名]` 可以创建新的分支。<br />此命令创建新分支后并未切换到新分支，还是在 master 分支上，执行 `git checkout [分支名]` 切换分支。

`git checkout -b [分支名]` 创建分支并切换到新分支。

**推送新分支到远程**<br />`git push [主机名] [本地分支名]:[远程分支名]` 即可将本地分支推送到远程仓库的分支中，通常冒号前后的分支名是相同的，如果是相同的，可以省略 `:[远程分支名]`，如果远程分支不存在，会自动创建。

**本地分支跟踪远程分支**<br />执行这个命令 `git branch -u [主机名/远程分支名] [本地分支名]` 将本地分支与远程分支关联，或者说使本地分支跟踪远程分支。如果是设置当前所在分支跟踪远程分支，最后一个参数本地分支名可以省略不写。设置完即可使用 `git push` 推送代码了。<br />在推送的时候，加个 `--set-upstream` 或其简写 `-u` 选项即可直接设置跟踪远程分支，无须重复设置。即 `git push -u origin dev` 。

**删除远程分支**<br />使用 `git push [主机名] :[远程分支名]` ，如果一次性删除多个，可以这样： `git push [主机名] :[远程分支名] :[远程分支名] :[远程分支名]` 。此命令的原理是将空分支推送到远程分支，结果自然就是远程分支被删除。<br />另一个删除远程分支的命令： `git push [主机名] --delete [远程分支名]`。

**给本地分支改名**<br />`git branch -m [原分支名] [新分支名]` ，若修改当前所在分支的名字，原分支名可以省略不写。

**删除本地分支**<br />`git branch -D [分支名]` ，同样地，此命令也可以一次删除多个，将需要删除的分支名罗列在命令后面即可。

<a name="rKBYl"></a>
# Git 多人协作
我们在写代码时，总会出现一些不需要上传到仓库的垃圾文件、缓存文件、备份文件、环境文件等等，可以创建一个忽略文件将这些不需要被上传到远程仓库的文件忽略掉。忽略文件的名字是 `.gitignore`，它被放置在仓库主目录下，将不需上传的文件的名字写入其中，Git 就会自动忽略它们。<br />[https://github.com/github/gitignore](https://github.com/github/gitignore)

注意每个 issue 在创建后都会生成一个编号，如 #1。<br />在执行 commit 命令时，备注信息里有个 “ `fix #1`”，这是必要的，当备注信息中含有此字样的 commit 出现在组长仓库，仓库中编号为 #1 的 issue 就会自动关闭。类似的字样还有 “fixes #xxx、fixed #xxx、closes #xxx、close #xxx、closed #xxx”，这些并不重要，选择字母最少的 fix 就可以了。

**同步主仓库**<br />首先，使用 remote 系列命令来增加一个关联主机，执行 `git remote add [主机名] [主仓库的地址]`，注意，主仓库的地址使用 https 开头的。<br />主机名是随意定义的，只要不是 origin 就可以，因为自己的仓库地址对应的主机名是 origin，主仓库的主机名通常定义为 up 或 upstream，这个主机名其实就是一个变量，它的值就是仓库地址，例如 `git push origin master` 完全等于 `git push git@github.com:Manchangdx/work master`。<br />现在可以使用前面课程介绍过的 `fetch` 命令来拉取主仓库的全部分支信息到本地仓库了。<br />如何同步主仓库？方法有二，一是执行 `git pull --rebase up master` ，此命令需联网，二是执行 `git rebase up/stream`，此命令不联网，因为前面已经执行了 `git fetch up` 这个需要联网的命令，本地已经有了最新的主仓库 master 分支信息，所以可以这么操作。<br />总结一下： `git pull --rebase` = `git fetch` + `git rebase`。

<a name="IEwzg"></a>
# Tag 和 Release
在一个项目中，我们可能需要阶段性地发布一个版本，比如 `V1.0` `V1.0.2` `V3.2 Beta` 之类的，Git 的标签可以满足这个需求。在一个长期大型项目中，可能会有数千个提交版本，我们可能需要对重要的节点性提交打个记号，这时也可以使用 Git 的标签功能。在一些项目相关的书籍中，我们会看到 “执行 xxx 命令签出这个版本以查看对应的代码” ，这也是使用 Git 的标签功能做到的。

Tags 通常在本地使用 git 命令创建后推送到 GitHub 上。<br />重要的一点，我们创建标签是给具体的某次提交创建的，跟分支无关。<br />创建标签使用 `git tag [标签名] -m [备注信息] [提交版本号]` 这个命令。其中 `-m [备注信息]` 可以省略不写，但建议不要省略。 `[提交版本号]` 可以省略，如果是给当前分支最新的提交创建标签的话。<br />执行 `git tag` 命令显示仓库中的全部标签列表。<br />执行 `git show [标签名]` 查看标签详情。<br />执行 `git tag -d [标签名]` 删除本地标签。<br />执行 `git push origin [标签名]` 推送标签到远程仓库。<br />使用 `git push origin --tags` 命令将全部本地标签推送至远程仓库。

如果标签废弃不用或者写错了，可以使用 `git push origin :refs/tags/[标签名]` 删除远程仓库的标签。（本地标签需要另外手动删除）

**签出版本**<br />现在介绍一下关于 “签出版本” 的操作，我们会见到类似这种说明：“如果你从 GitHub 上克隆了这个程序的仓库，那么可以在仓库主目录下执行 `git checkout xxx` 签出程序的这个版本。” 其实签出版本就是指定某个提交版本创建一个新的分支。<br />假定当前的 work 仓库就是一个程序，我们要签出 001 版本，执行以下步骤即可。<br />首先执行 `git checkout [标签名]` 切换到之前的某个提交版本，然后执行 `git checkout -b [新的分支名]` 将此提交版本固定到一个新分支上并切换到此分支。

**Releases**<br />GitHub 的 releases 是 2013 年发布的新功能，旨在协助软件开发者分发新版本给用户，关于这个功能这里仅作简单介绍。<br />当项目组织宣布发布一个软件产品的版本，发布过程就是一个将软件交付给最终用户的工作流。版本是具有修改日志和二进制文件的一类对象，它们提供了 Git 工作流之外的完整项目历史，它们也可以从存储库的主页上被访问。发布版 release 附带发布说明和下载软件或源代码的链接。按照许多 Git 项目的约定，发布版本与 Git 的标签 tag 绑定。您可以使用现有的标签，或者让 release 在发布时创建标签。这就是上面查看 GitHub 仓库中标签信息时出现的场景。<br />标签是 Git 中的概念，而 releases 则是 Github、码云等源码托管商所提供的更高层的概念。Git 本身是没有 releases 这个概念，只有 tag。两者之间的关系则是，release 基于 tag，为 tag 添加更丰富的信息，一般是编译好的文件。
